{% extends "base.html" %}

{% block title %}Param√®tres G√©n√©raux{% endblock %}

{% block extra_css %}
<link rel="stylesheet" href="{{ url_for('static', filename='css/general_settings.css') }}">
{% endblock %}

{% block content %}
<div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 24px;">
    <h1 style="margin: 0;">Param√®tres G√©n√©raux</h1>
    <a href="{{ url_for('main.reopen_wizard') }}" class="wizard-reopen-btn" style="background: linear-gradient(135deg, #0d6efd 0%, #0a58ca 100%); color: white; padding: 12px 24px; border-radius: 8px; text-decoration: none; font-weight: 600; display: flex; align-items: center; gap: 8px; box-shadow: 0 2px 8px rgba(13, 110, 253, 0.3); transition: all 0.2s;">
        <span style="font-size: 18px;">üéØ</span>
        Assistant de configuration
    </a>
</div>

<!-- Formulaire principal pour les param√®tres g√©n√©raux -->
<form method="POST" enctype="multipart/form-data" class="settings">
    <input type="hidden" name="csrf_token" value="{{ csrf_token() }}">
    
    <label for="bot-name">Nom du Bot :</label>
    <input type="text" id="bot-name" name="bot-name" 
            value="{{ settings.bot_name if settings.bot_name else '' }}"
            placeholder="Entrez le nom du bot..." required>
    
    <label for="description">Description Technique :</label>
    <textarea id="description" name="description" 
              placeholder="Entrez la description technique du bot...">{{ settings.bot_description if settings.bot_description else '' }}</textarea>
    
    <label for="avatar">Avatar du Bot :</label>
    <input type="file" id="avatar" name="avatar" accept="image/*">
    
    <button type="submit">Enregistrer</button>
</form>

{% if settings.bot_avatar %}
<div class="avatar-container">
    <p>Avatar Actuel :</p>
    <div class="avatar-wrapper">
        <img src="{{ settings.bot_avatar }}" alt="Avatar du Bot" class="current-avatar">
        <form method="POST" action="{{ url_for('main.delete_avatar') }}" class="delete-avatar-form" style="display: inline;">
            <input type="hidden" name="csrf_token" value="{{ csrf_token() }}">
            <button type="submit" class="delete-avatar-button" 
                    title="Supprimer l'avatar"
                    onclick="return confirm('√ätes-vous s√ªr de vouloir supprimer l\'avatar ?');">√ó</button>
        </form>
    </div>
</div>
{% endif %}
{% endblock %}