{% extends "base.html" %}

{% block title %}Compétences du Bot{% endblock %}

{% block extra_css %}
<link rel="stylesheet" href="{{ url_for('static', filename='css/content.css') }}">
<link rel="stylesheet" href="{{ url_for('static', filename='css/competences.css') }}">
{% endblock %}

{% block content %}
<div class="competences-container">
    <h1>Configuration des Compétences du Bot</h1>
    
    <form method="POST" class="competences-form">
        {{ form.csrf_token }}
        
        <!-- Service Client -->
        <div class="config-card">
            <div class="card-header">
                <h3>Service Client</h3>
                <label class="switch">
                    <input type="checkbox" name="service_client_active" 
                           {% if config.service_client_active %}checked{% endif %}>
                    <span class="slider"></span>
                </label>
            </div>
            
            <div class="card-content" id="serviceClientConfig">
                <div class="form-group">
                    <label>Niveau de Service</label>
                    <select name="service_client_niveau" class="form-control">
                        <option value="basic" {% if config.service_client_niveau == 'basic' %}selected{% endif %}>
                            Basique (FAQ, redirections simples)
                        </option>
                        <option value="advanced" {% if config.service_client_niveau == 'advanced' %}selected{% endif %}>
                            Avancé (Résolution de problèmes, suivi de commandes)
                        </option>
                        <option value="expert" {% if config.service_client_niveau == 'expert' %}selected{% endif %}>
                            Expert (Support technique, cas complexes)
                        </option>
                    </select>
                </div>

                <div class="form-group">
                    <label>Domaines de Compétence</label>
                    <div class="checkbox-group">
                        <label>
                            <input type="checkbox" name="service_client_domains[]" value="commandes"
                                   {% if 'commandes' in config.service_client_domains %}checked{% endif %}>
                            Suivi de commandes
                        </label>
                        <label>
                            <input type="checkbox" name="service_client_domains[]" value="problemes_techniques"
                                   {% if 'problemes_techniques' in config.service_client_domains %}checked{% endif %}>
                            Problèmes techniques
                        </label>
                        <label>
                            <input type="checkbox" name="service_client_domains[]" value="facturation"
                                   {% if 'facturation' in config.service_client_domains %}checked{% endif %}>
                            Facturation et paiement
                        </label>
                    </div>
                </div>
            </div>
        </div>

        <!-- Génération de Leads -->
        <div class="config-card">
            <div class="card-header">
                <h3>Génération de Leads</h3>
                <label class="switch">
                    <input type="checkbox" name="lead_gen_active"
                           {% if config.lead_gen_active %}checked{% endif %}>
                    <span class="slider"></span>
                </label>
            </div>
            
            <div class="card-content" id="leadGenConfig">
                <div class="form-group">
                    <label>Qualification des Leads</label>
                    <div class="checkbox-group">
                        <label>
                            <input type="checkbox" name="lead_qualification[]" value="budget"
                                   {% if 'budget' in config.lead_qualification %}checked{% endif %}>
                            Budget
                        </label>
                        <label>
                            <input type="checkbox" name="lead_qualification[]" value="timing"
                                   {% if 'timing' in config.lead_qualification %}checked{% endif %}>
                            Délai de projet
                        </label>
                        <label>
                            <input type="checkbox" name="lead_qualification[]" value="decision_maker"
                                   {% if 'decision_maker' in config.lead_qualification %}checked{% endif %}>
                            Pouvoir de décision
                        </label>
                    </div>
                </div>
            </div>
        </div>

        <!-- Support Technique -->
        <div class="config-card">
            <div class="card-header">
                <h3>Support Technique</h3>
                <label class="switch">
                    <input type="checkbox" name="support_tech_active"
                           {% if config.support_tech_active %}checked{% endif %}>
                    <span class="slider"></span>
                </label>
            </div>
            
            <div class="card-content" id="supportTechConfig">
                <div class="form-group">
                    <label>Niveau de Complexité</label>
                    <select name="support_tech_niveau" class="form-control">
                        <option value="l1" {% if config.support_tech_niveau == 'l1' %}selected{% endif %}>
                            Niveau 1 (Problèmes simples)
                        </option>
                        <option value="l2" {% if config.support_tech_niveau == 'l2' %}selected{% endif %}>
                            Niveau 2 (Problèmes intermédiaires)
                        </option>
                        <option value="l3" {% if config.support_tech_niveau == 'l3' %}selected{% endif %}>
                            Niveau 3 (Problèmes complexes)
                        </option>
                    </select>
                </div>
            </div>
        </div>

        <div class="form-actions">
            <button type="submit" class="btn btn-primary">Enregistrer les modifications</button>
            <button type="reset" class="btn btn-secondary">Réinitialiser</button>
        </div>
    </form>
</div>
{% endblock %}

{% block extra_js %}
<script src="{{ url_for('static', filename='js/competences.js') }}"></script>
{% endblock %}
